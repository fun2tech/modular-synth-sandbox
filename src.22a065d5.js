parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"hFzp":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(n){t(this,e),this.ecs=n,this.ctx=new AudioContext};exports.SAudio=e;
},{}],"skuX":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(){t(this,e)};exports.AbstractUpdater=e;
},{}],"pdbw":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){return o(t)||n(t,r)||i(t,r)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,o=!1,u=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(a){o=!0,u=a}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return e}}function o(t){if(Array.isArray(t))return t}function u(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}function i(t,r){if(t){if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,r):void 0}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function f(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,r,e){return r&&f(t.prototype,r),e&&f(t,e),t}function y(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&s(t,r)}function s(t,r){return(s=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function p(t){var r=h();return function(){var e,n=v(t);if(r){var o=v(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return b(this,e)}}function b(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?d(r):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./AbstractUpdater"),w=function(t){y(n,m.AbstractUpdater);var e=p(n);function n(t){var r;return a(this,n),(r=e.call(this)).ecs=t,r}return l(n,[{key:"update",value:function(){var t,e=u(this.ecs.buttons);try{for(e.s();!(t=e.n()).done;){var n=r(t.value,2),o=n[0],i=n[1],c=this.ecs.pointerGrabTargets.get(o),a=c.grabbed&&!i.down;i.down=Boolean(c.grabbed),a&&i.onClick()}}catch(f){e.e(f)}finally{e.f()}}}]),n}();exports.SButtonClicker=w;
},{"./AbstractUpdater":"skuX"}],"lgt2":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function t(){e(this,t)};exports.AbstractRenderer=t;
},{}],"qn35":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||u(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(f){o=!0,i=f}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=u(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=h();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?d(e):r}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var v=require("./AbstractRenderer"),S=function(t){y(n,v.AbstractRenderer);var r=p(n);function n(t){var e;return f(this,n),(e=r.call(this)).ecs=t,e}return l(n,[{key:"draw",value:function(){var t=this.ecs.display.ctx;t.lineWidth=2,t.textAlign="center",t.textBaseline="middle",t.font="10px monospace";var r,n=i(this.ecs.buttons);try{for(n.s();!(r=n.n()).done;){var o=e(r.value,2),u=o[0],c=o[1],f=this.ecs.display.getWorldTransform(u),a=f.x,l=f.y,y=f.w,s=f.h;t.strokeStyle="grey",t.strokeRect(a,l,y,s),t.fillStyle=c.down?"grey":"#222",t.fillRect(a,l,y,s),t.fillStyle="white",t.fillText(c.label,a+y/2,l+s/2)}}catch(p){n.e(p)}finally{n.f()}}}]),n}();exports.SButtonRenderer=S;
},{"./AbstractRenderer":"lgt2"}],"cNbD":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||a(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?h(e):r}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./AbstractRenderer"),S=require("./ECS"),g=function(r){s(o,m.AbstractRenderer);var n=p(o);function o(t){var e;return c(this,o),(e=n.call(this)).ecs=t,e}return l(o,[{key:"draw",value:function(){var r=this.ecs.display.ctx;r.fillStyle="white",r.strokeStyle="grey",r.lineWidth=1;var n=8,o=1.5*n;r.font=n+"px monospace",r.textAlign="left",r.textBaseline="top";var a=1;function u(t){var e,u=i(t.split("\n"));try{for(u.s();!(e=u.n()).done;){var c=e.value;r.strokeText(c,2*n,r.canvas.height-a*o),r.fillText(c,2*n,r.canvas.height-a++*o)}}catch(f){u.e(f)}finally{u.f()}}for(var c=0,f=Object.entries(this.ecs);c<f.length;c++){var l=e(f[c],2),s=l[0],y=l[1];if(y instanceof S.EntityComponentMap){u("");var p,b=i(y);try{for(b.s();!(p=b.n()).done;){var h=e(p.value,2),v=h[0],d=h[1];u(v.toString().padEnd(40," ")+JSON.stringify(d,function(e,r){return"symbol"===t(r)?r.toString():"function"==typeof r?r.name||r.constructor.name:r}))}}catch(E){b.e(E)}finally{b.f()}u("-- "+s+" --")}}var m,g=i(this.ecs.pointers);try{for(g.s();!(m=g.n()).done;){var w=e(m.value,2),O=w[0],j=w[1],x=this.ecs.transforms.get(O),A=x.x,T=x.y,_=x.w,R=x.h;r.strokeStyle=j.pressed?"red":"lime",r.lineWidth=2,r.beginPath(),r.moveTo(A,T-10),r.lineTo(A,T+10),r.moveTo(A-10,T),r.lineTo(A+10,T),r.rect(A,T,_,R),r.stroke()}}catch(E){g.e(E)}finally{g.f()}}}]),o}();exports.SDebugRenderer=g;
},{"./AbstractRenderer":"lgt2","./ECS":"y35b"}],"sopS":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||u(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(f){o=!0,i=f}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=u(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?d(e):r}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./AbstractRenderer"),S=function(t){y(n,m.AbstractRenderer);var r=p(n);function n(t){var e;return f(this,n),(e=r.call(this)).ecs=t,e}return l(n,[{key:"draw",value:function(){var t=this.ecs.display.ctx;t.textAlign="center",t.textBaseline="top",t.font="bold 15px monospace",t.lineWidth=2;var r,n=i(this.ecs.devices);try{for(n.s();!(r=n.n()).done;){var o=e(r.value,2),u=o[0],c=o[1],f=this.ecs.display.getWorldTransform(u),a=f.x,l=f.y,y=f.w,s=f.h;t.strokeStyle="grey",t.strokeRect(a,l,y,s),t.fillStyle="#222",t.fillRect(a,l,y,s),t.fillStyle="white",t.fillText(c.name,a+y/2,l+10,y-20)}}catch(p){n.e(p)}finally{n.f()}}}]),n}();exports.SDeviceRenderer=S;
},{"./AbstractRenderer":"lgt2"}],"Nj29":[function(require,module,exports) {
"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./AbstractRenderer"),c=require("./AbstractUpdater"),o=function(){function t(e){var r=this;n(this,t),this.ecs=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.resize=function(){r.canvas.width=document.body.clientWidth,r.canvas.height=document.body.clientHeight},this.loop=function(){r.update(),r.draw(),requestAnimationFrame(r.loop)},document.body.appendChild(this.canvas),window.addEventListener("resize",this.resize),this.resize(),requestAnimationFrame(this.loop)}return a(t,[{key:"update",value:function(){for(var t=0,e=Object.values(this.ecs);t<e.length;t++){var r=e[t];r instanceof c.AbstractUpdater&&r.update()}}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.font=(this.canvas.height/8|0)+"px monospace",this.ctx.fillStyle="hsl(180, 50%, 10%)",this.ctx.fillText("Modular",this.canvas.width/2,2*this.canvas.height/6),this.ctx.fillText("Synth",this.canvas.width/2,3*this.canvas.height/6),this.ctx.fillText("Sandbox",this.canvas.width/2,4*this.canvas.height/6);for(var t=0,e=Object.values(this.ecs);t<e.length;t++){var r=e[t];r instanceof s.AbstractRenderer&&r.draw()}}},{key:"getWorldTransform",value:function(t){var r=e({},this.ecs.transforms.get(t));if(r.parent){var n=this.getWorldTransform(r.parent);r.x+=n.x,r.y+=n.y}return r}}]),t}();exports.SDisplay=o;
},{"./AbstractRenderer":"lgt2","./AbstractUpdater":"skuX"}],"jnFJ":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=e(t))){var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u,i=!0,c=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){c=!0,u=t},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw u}}}}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function u(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,r,e){return r&&u(t.prototype,r),e&&u(t,e),t}function c(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&a(t,r)}function a(t,r){return(a=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function f(t){var r=y();return function(){var e,n=p(t);if(r){var o=p(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return l(this,e)}}function l(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?s(r):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var b=require("./AbstractUpdater"),d=function(t){c(n,b.AbstractUpdater);var e=f(n);function n(t){var r;return o(this,n),(r=e.call(this)).ecs=t,r}return i(n,[{key:"update",value:function(){var t,e=r(this.ecs.dragAndDropTargets);try{for(e.s();!(t=e.n()).done;){var n=t.value,o=this.ecs.pointerGrabTargets.get(n);if(o.grabbed){var u=this.ecs.transforms.get(o.grabbed.pointer),i=this.ecs.transforms.get(n);i.x=u.x+o.grabbed.dx,i.y=u.y+o.grabbed.dy}}}catch(c){e.e(c)}finally{e.f()}}}]),n}();exports.SDragAndDrop=d;
},{"./AbstractUpdater":"skuX"}],"SdOw":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||i(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}function o(t){if(Array.isArray(t))return t}function a(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?b(e):r}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var d=require("./AbstractUpdater"),g=function(t){s(n,d.AbstractUpdater);var r=p(n);function n(t){var e;return c(this,n),(e=r.call(this)).ecs=t,e}return l(n,[{key:"update",value:function(){var t,r=this,n=a(this.ecs.knobs);try{var o=function(){var n,o=e(t.value,2),a=o[0],i=o[1],u=r.ecs.pointerGrabTargets.get(a);if(u.grabbed){var c=r.ecs.knobDragZones.get(a),f=r.ecs.display.getWorldTransform(u.grabbed.pointer).y,l=function(t){return i.param.maxValue>1e3?Math.log10(t):t};if(c){var s=(f-c.minY)/(c.maxY-c.minY);s=Math.max(0,Math.min(1,s)),i.param.value=i.param.minValue+(n=s*l(i.param.maxValue-i.param.minValue),i.param.maxValue>1e3?Math.pow(10,n):n)}else{var y=l(i.param.value-i.param.minValue)/l(i.param.maxValue-i.param.minValue),p=f+200*(y=Math.max(0,Math.min(1,y))),m=p-200;r.ecs.knobDragZones.set(a,{minY:p,maxY:m})}}else r.ecs.knobDragZones.delete(a)};for(n.s();!(t=n.n()).done;)o()}catch(i){n.e(i)}finally{n.f()}}}]),n}();exports.SKnobManager=g;
},{"./AbstractUpdater":"skuX"}],"LnCi":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||i(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}function o(t){if(Array.isArray(t))return t}function a(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=m();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?h(e):r}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var v=require("./AbstractRenderer"),g=function(t){s(n,v.AbstractRenderer);var r=p(n);function n(t){var e;return c(this,n),(e=r.call(this)).ecs=t,e}return f(n,[{key:"draw",value:function(){var t=this,r=this.ecs.display.ctx;r.textAlign="center",r.textBaseline="middle",r.font="10px monospace";var n,o=function(t){return Math.PI*(2*t-1)*.7-Math.PI/2},i=o(0),u=o(1),c=a(this.ecs.knobs);try{var l=function(){var a=e(n.value,2),c=a[0],l=a[1],f=t.ecs.display.getWorldTransform(c),s=f.x,y=f.y,p=f.w,b=f.h,h=Math.min(p,b)/2,m=function(t){return l.param.maxValue>1e3?Math.log10(t):t},d=m(l.param.value-l.param.minValue)/m(l.param.maxValue-l.param.minValue);d=Math.max(0,Math.min(1,d));var v=o(d);r.strokeStyle=r.fillStyle="hsl(180, "+(100*d|0)+"%, "+(50+30*d|0)+"%)",r.lineWidth=1,r.beginPath(),r.arc(s+h,y+h,h,i,u),r.stroke(),r.lineWidth=3,r.beginPath(),r.arc(s+h,y+h,h,i,v),r.stroke(),r.fillText(l.name,s+h,y+h);var g=t.ecs.pointerGrabTargets.get(c);if(g.grabbed){var S=t.ecs.display.getWorldTransform(g.grabbed.pointer),w=S.x,x=S.y;r.fillStyle="white",r.fillText(l.param.value.toFixed(2),w+30,x+30)}};for(c.s();!(n=c.n()).done;)l()}catch(f){c.e(f)}finally{c.f()}}}]),n}();exports.SKnobRenderer=g;
},{"./AbstractRenderer":"lgt2"}],"P4lI":[function(require,module,exports) {
"use strict";function e(e,o){return n(e)||r(e,o)||a(e,o)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}function n(e){if(Array.isArray(e))return e}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var s;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.NOTE_ON=144]="NOTE_ON",e[e.NOTE_OFF=128]="NOTE_OFF"}(s||(s={}));var l=function(){function t(e){var r,n,a=this;u(this,t),this.ecs=e;var i=0;null===(r=(n=navigator).requestMIDIAccess)||void 0===r||r.call(n).then(function(e){var t,r=o(e.inputs.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;a.createInput(n,i++)}}catch(u){r.e(u)}finally{r.f()}})}return f(t,[{key:"createInput",value:function(t,r){var n=this,o=this.ecs.prefabs.createDevice(t.name||"MIDI in #"+r);this.ecs.transforms.set(o,{x:10,y:10+100*r,w:300,h:90});var a=new ConstantSourceNode(this.ecs.audio.ctx,{offset:0});a.start(),this.ecs.prefabs.createPort({name:"gate",device:o,node:a,output:0,x:109,y:40});var i=440,u=new ConstantSourceNode(this.ecs.audio.ctx,{offset:i});u.start(),this.ecs.prefabs.createPort({name:"freq",device:o,node:u,output:0,x:159,y:40}),t.addEventListener("midimessage",function(t){var r=e(t.data,3),o=r[0],c=r[1],f=r[2];if(o===s.NOTE_ON&&0!==f){var l=n.noteToFrequency(c);a.offset.value=1,u.offset.value=l,i=c}else(o===s.NOTE_OFF||o===s.NOTE_ON&&0===f)&&c===i&&(a.offset.value=0)})}},{key:"noteToFrequency",value:function(e){return 13.75*Math.pow(2,(e-9)/12)}}]),t}();exports.SMidiIO=l;
},{}],"OXog":[function(require,module,exports) {
"use strict";function t(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=n(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,s=!0,a=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==o.return||o.return()}finally{if(a)throw i}}}}function n(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function n(t){var e=this;r(this,n),this.ecs=t,this.mouse=this.ecs.createEntity("mouse"),this.transform={x:0,y:0,w:1,h:1},this.pointer={pressed:!1},this.onMouseDown=function(t){e.pointer.pressed=!0},this.onMouseUp=function(){e.pointer.pressed=!1},this.onMouseMove=function(t){e.transform.x=t.clientX,e.transform.y=t.clientY,e.pointer.target=e.findTargetEntity(e.transform)},t.transforms.set(this.mouse,this.transform),t.pointers.set(this.mouse,this.pointer),t.display.canvas.addEventListener("mousedown",this.onMouseDown),t.display.canvas.addEventListener("mouseup",this.onMouseUp),t.display.canvas.addEventListener("mousemove",this.onMouseMove)}return i(n,[{key:"findTargetEntity",value:function(n,e){var r,o=t(this.ecs.pointerGrabTargets.keys());try{for(o.s();!(r=o.n()).done;){var i=r.value,s=this.ecs.display.getWorldTransform(i);if(s.parent===e&&s.x<=this.transform.x&&s.y<=this.transform.y&&s.x+s.w>this.transform.x&&s.y+s.h>this.transform.y)return this.findTargetEntity(n,i)}}catch(a){o.e(a)}finally{o.f()}return e}}]),n}();exports.SMouseInput=s;
},{}],"c8pg":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||i(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){o=!0,a=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}}function o(t){if(Array.isArray(t))return t}function a(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=h();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?d(e):r}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var v=require("./AbstractUpdater"),g=function(t){l(n,v.AbstractUpdater);var r=b(n);function n(t){var e;return c(this,n),(e=r.call(this)).ecs=t,e.dummyGrabTargets=new Set,e}return s(n,[{key:"update",value:function(){var t,r=new Map(this.ecs.pointers),n=new Set(this.ecs.pointerGrabTargets.keys()),o=a(this.ecs.pointerGrabTargets);try{for(o.s();!(t=o.n()).done;){var i=e(t.value,2),u=i[0],c=i[1];if(c.grabbed)this.ecs.pointers.get(c.grabbed.pointer).pressed?(r.delete(c.grabbed.pointer),n.delete(u)):(delete c.grabbed,this.dummyGrabTargets.has(u)&&(this.dummyGrabTargets.delete(u),this.ecs.pointerGrabTargets.delete(u)))}}catch(S){o.e(S)}finally{o.f()}var f,s=a(r);try{for(s.s();!(f=s.n()).done;){var l=e(f.value,2),y=l[0],b=l[1],p=b.target,d=b.pressed;if(d&&p&&n.has(p)){var h=this.ecs.transforms.get(y),m=this.ecs.transforms.get(p),v=m.x-h.x,g=m.y-h.y;this.ecs.pointerGrabTargets.get(p).grabbed={pointer:y,dx:v,dy:g}}else d&&this.cancelGrab(y)}}catch(S){s.e(S)}finally{s.f()}}},{key:"cancelGrab",value:function(t){var e=this.ecs.createEntity("cancelled-grab-target");this.dummyGrabTargets.add(e),this.ecs.pointerGrabTargets.set(e,{grabbed:{pointer:t,dx:0,dy:0}})}}]),n}();exports.SPointerGrabber=g;
},{"./AbstractUpdater":"skuX"}],"FbqG":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||c(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function a(t){return l(t)||f(t)||c(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function f(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=w();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?S(e):r}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var j=require("./AbstractRenderer"),O=function(t){h(n,j.AbstractRenderer);var r=m(n);function n(t){var e;return y(this,n),(e=r.call(this)).ecs=t,e}return b(n,[{key:"draw",value:function(){var t=this.ecs.display.ctx;t.textAlign="center",t.textBaseline="middle",t.font="10px monospace",t.lineWidth=1;var r,n=new Set(a(this.ecs.wires.values()).flatMap(function(t){return[t.source,t.destination]})),o=i(this.ecs.ports);try{for(o.s();!(r=o.n()).done;){var u=e(r.value,2),c=u[0],f=u[1],l=this.ecs.display.getWorldTransform(c),s=l.x,y=l.y,p=l.w,b=l.h,h=Math.min(p,b)/2,d=n.has(c);t.strokeStyle=t.fillStyle=d?"white":"grey",t.beginPath(),t.arc(s+h,y+h,h,-Math.PI,Math.PI),t.stroke(),t.fillText(f.name,s+h,y+h)}}catch(m){o.e(m)}finally{o.f()}}}]),n}();exports.SPortRenderer=O;
},{"./AbstractRenderer":"lgt2"}],"ILBV":[function(require,module,exports) {
"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){if(null==e)return{};var r,n,i=a(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function i(e){return u(e)||s(e)||o(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var p=function(){function e(t){var r=this;f(this,e),this.ecs=t,this.getContentBox=function(e,t){var n="w"===t?"x":"y",a=i(r.ecs.transforms.values()).filter(function(t){return t.parent===e}),c=Math.min.apply(Math,i(a.map(function(e){return e.x})));return Math.max.apply(Math,i(a.map(function(e){return e[n]+e[t]})))+c}}return y(e,[{key:"createScene",value:function(){this.createToolbar()}},{key:"createMaster",value:function(){var e=this.createDevice("Master");return this.createPort({device:e,name:"spk",node:this.ecs.audio.ctx.destination,input:0,x:20,y:40}),e}},{key:"createOscillator",value:function(){var e=this.createDevice("Osc"),t=new OscillatorNode(this.ecs.audio.ctx);return t.start(),this.createPort({name:"freq",device:e,param:t.frequency,x:20,y:40}),this.createKnob({name:"freq",device:e,param:this.clampParam(t.frequency,0,2e4),x:70,y:40}),this.createKnob({name:"dtn",device:e,param:this.clampParam(t.detune,-100,100),x:44,y:90}),this.createOscillatorWaveButton(e,t,"sine",0),this.createOscillatorWaveButton(e,t,"triangle",1),this.createOscillatorWaveButton(e,t,"sawtooth",2),this.createOscillatorWaveButton(e,t,"square",3),this.createPort({name:"out",device:e,node:t,output:0,x:44,y:230}),e}},{key:"createOscillatorWaveButton",value:function(e,t,r,n){var a=this.ecs.createEntity("osc-waveform-"+r);this.ecs.transforms.set(a,{parent:e,x:20,y:140+19*n,w:80,h:20}),this.ecs.buttons.set(a,{label:r,onClick:function(){t.type=r},get down(){return t.type===r},set down(e){}}),this.ecs.pointerGrabTargets.set(a,{})}},{key:"createLPF",value:function(){var e=this.createDevice("LPF"),t=new BiquadFilterNode(this.ecs.audio.ctx);return this.createPort({name:"in",device:e,node:t,input:0,x:45,y:40}),this.createPort({name:"fm",device:e,param:t.frequency,x:20,y:90}),this.createKnob({name:"freq",device:e,param:t.frequency,x:70,y:90}),this.createPort({name:"out",device:e,node:t,output:0,x:45,y:140}),e}},{key:"createGain",value:function(){var e=this.createDevice("Gain"),t=new GainNode(this.ecs.audio.ctx);return this.createPort({name:"in",device:e,node:t,input:0,x:45,y:40}),this.createPort({name:"out",device:e,node:t,output:0,x:20,y:90}),this.createKnob({name:"gain",device:e,param:this.clampParam(t.gain,0,2),x:70,y:90}),e}},{key:"createPanner",value:function(){var e=this.createDevice("Panner"),t=new StereoPannerNode(this.ecs.audio.ctx);return this.createPort({name:"in",device:e,node:t,input:0,x:20,y:40}),this.createKnob({name:"pan",device:e,param:t.pan,x:20,y:90}),this.createPort({name:"out",device:e,node:t,output:0,x:20,y:140}),e}},{key:"clampParam",value:function(e,t,r){return new Proxy(e,{get:function(e,n){return"minValue"===n?t:"maxValue"===n?r:e[n]},set:function(e,t,r){return e[t]=r,!0}})}},{key:"createDevice",value:function(e){var t=this.getContentBox,r=this.ecs.createEntity(e.toLowerCase());return this.ecs.devices.set(r,{name:e}),this.ecs.transforms.set(r,{x:0,y:0,get w(){return t(r,"w")},get h(){return t(r,"h")}}),this.ecs.pointerGrabTargets.set(r,{}),this.ecs.dragAndDropTargets.add(r),r}},{key:"createPort",value:function(e){var r=e.name,a=e.device,i=e.x,c=e.y,o=n(e,["name","device","x","y"]),s=this.ecs.createEntity(a.description+"-"+r.toLowerCase());return this.ecs.transforms.set(s,{parent:a,x:i,y:c,w:32,h:32}),this.ecs.ports.set(s,t({name:r},o)),this.ecs.pointerGrabTargets.set(s,{}),s}},{key:"createKnob",value:function(e){var r=e.name,a=e.device,i=e.x,c=e.y,o=n(e,["name","device","x","y"]),s=this.ecs.createEntity(a.description+"-"+r.toLowerCase());return this.ecs.transforms.set(s,{parent:a,x:i,y:c,w:32,h:32}),this.ecs.knobs.set(s,t({name:r},o)),this.ecs.pointerGrabTargets.set(s,{}),s}},{key:"createToolbar",value:function(){var e=this,t=0,r=this,n=function(){return{get x(){return r.ecs.display.canvas.width-110},y:10+20*t++,w:100,h:20}};this.createSpawnButton("Master",function(){return e.createMaster()},n()),this.createSpawnButton("Osc",function(){return e.createOscillator()},n()),this.createSpawnButton("LPF",function(){return e.createLPF()},n()),this.createSpawnButton("Gain",function(){return e.createGain()},n()),this.createSpawnButton("Panner",function(){return e.createPanner()},n())}},{key:"createSpawnButton",value:function(e,t,r){var n=this,a=this.ecs.createEntity("button"),i={};return this.ecs.transforms.set(a,r),this.ecs.pointerGrabTargets.set(a,i),this.ecs.buttons.set(a,{label:e,down:!1,onClick:function(){var e=t(),r=n.ecs.transforms.get(e);n.ecs.pointerGrabTargets.get(e).grabbed={pointer:i.grabbed.pointer,dx:-r.w/2,dy:-r.h/4},delete i.grabbed}}),a}}]),e}();exports.SPrefabs=p;
},{}],"TXlZ":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return o(t)||n(t,e)||a(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?d(e):r}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./AbstractUpdater"),g=function(t){l(n,m.AbstractUpdater);var r=p(n);function n(t){var e;return u(this,n),(e=r.call(this)).ecs=t,e}return f(n,[{key:"update",value:function(){var t,r=i(this.ecs.pointerGrabTargets);try{for(r.s();!(t=r.n()).done;){var n=e(t.value,2),o=n[0],a=n[1];a.grabbed&&this.ecs.ports.has(o)?(this.deleteWireIfExists(o,a.grabbed.pointer)||this.createDraggableWire(o,a.grabbed.pointer),delete a.grabbed):!a.grabbed&&this.ecs.wires.has(o)&&this.dropWire(o)}}catch(c){r.e(c)}finally{r.f()}}},{key:"deleteWireIfExists",value:function(t,r){var n,o=i(this.ecs.wires);try{for(o.s();!(n=o.n()).done;){var a=e(n.value,2),c=a[0],u=a[1];if(u.source===t||u.destination===t)return this.disconnect(u),this.ecs.wires.delete(c),this.ecs.pointerGrabber.cancelGrab(r),!0}}catch(s){o.e(s)}finally{o.f()}return!1}},{key:"createDraggableWire",value:function(t,e){var r=this.ecs.createEntity("wire");this.ecs.wires.set(r,{source:t,destination:e}),this.ecs.pointerGrabTargets.set(r,{grabbed:{pointer:e,dx:0,dy:0}})}},{key:"dropWire",value:function(t){var e=this.ecs.wires.get(t),r=this.ecs.transforms.get(e.destination),n=this.ecs.mouseInput.findTargetEntity(r),o=!1;n&&this.ecs.ports.has(n)&&(e.destination=n,o=this.connect(e)),o||this.ecs.wires.delete(t),this.ecs.pointerGrabTargets.delete(t)}},{key:"connect",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.ecs.ports.get(t.source),n=this.ecs.ports.get(t.destination);if(!r||!n)return!1;if(void 0===r.output){var o=r;r=n,n=o}return void 0!==r.output&&(void 0!==n.input||void 0!==n.param)&&(n.param?r.node[e?"connect":"disconnect"](n.param,r.output):r.node[e?"connect":"disconnect"](n.node,r.output,n.input),!0)}},{key:"disconnect",value:function(t){this.connect(t,!1)}}]),n}();exports.SWireManager=g;
},{"./AbstractUpdater":"skuX"}],"Ey0W":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){return o(t)||n(t,r)||u(t,r)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(e.push(u.value),!r||e.length!==r);n=!0);}catch(a){o=!0,i=a}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return e}}function o(t){if(Array.isArray(t))return t}function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=u(t))){var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function u(t,r){if(t){if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,r):void 0}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function f(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,r,e){return r&&f(t.prototype,r),e&&f(t,e),t}function s(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&y(t,r)}function y(t,r){return(y=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function p(t){var r=d();return function(){var e,n=v(t);if(r){var o=v(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return b(this,e)}}function b(r,e){return!e||"object"!==t(e)&&"function"!=typeof e?h(r):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./AbstractRenderer"),w=function(t){s(n,m.AbstractRenderer);var e=p(n);function n(t){var r;return a(this,n),(r=e.call(this)).ecs=t,r}return l(n,[{key:"draw",value:function(){var t=this.ecs.display.ctx;t.lineWidth=10,t.lineCap="round",t.strokeStyle="rgba(255, 255, 255, .3)";var e,n=i(this.ecs.wires);try{for(n.s();!(e=n.n()).done;){var o=r(e.value,2),u=(o[0],o[1]),c=this.ecs.display.getWorldTransform(u.source),a=this.ecs.display.getWorldTransform(u.destination);t.beginPath(),t.moveTo(c.x+c.w/2,c.y+.8*c.h),t.bezierCurveTo(c.x+c.w/2,c.y+.8*c.h+100,a.x+a.w/2,a.y+.8*a.h+100,a.x+a.w/2,a.y+.8*a.h),t.stroke()}}catch(f){n.e(f)}finally{n.f()}}}]),n}();exports.SWireRenderer=w;
},{"./AbstractRenderer":"lgt2"}],"y35b":[function(require,module,exports) {
"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function o(e){var t=f();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||!p(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function a(e,t,r){return(a=f()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&h(i,r.prototype),i}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0});var b=require("./SAudio"),y=require("./SButtonClicker"),d=require("./SButtonRenderer"),S=require("./SDebugRenderer"),w=require("./SDeviceRenderer"),g=require("./SDisplay"),v=require("./SDragAndDrop"),R=require("./SKnobManager"),m=require("./SKnobRenderer"),q=require("./SMidiIO"),M=require("./SMouseInput"),O=require("./SPointerGrabber"),D=require("./SPortRenderer"),P=require("./SPrefabs"),_=require("./SWireManager"),j=require("./SWireRenderer"),k=function(e){i(r,c(Set));var t=o(r);function r(){return n(this,r),t.apply(this,arguments)}return r}();exports.EntitySet=k;var x=function(e){i(r,c(Map));var t=o(r);function r(){return n(this,r),t.apply(this,arguments)}return r}();exports.EntityComponentMap=x;var E=function(){function e(){n(this,e),this.transforms=new x,this.devices=new x,this.ports=new x,this.knobs=new x,this.wires=new x,this.pointers=new x,this.pointerGrabTargets=new x,this.dragAndDropTargets=new k,this.knobDragZones=new x,this.buttons=new x,this.prefabs=new P.SPrefabs(this),this.audio=new b.SAudio(this),this.display=new g.SDisplay(this),this.mouseInput=new M.SMouseInput(this),this.pointerGrabber=new O.SPointerGrabber(this),this.buttonClicker=new y.SButtonClicker(this),this.dragAndDrop=new v.SDragAndDrop(this),this.wireManager=new _.SWireManager(this),this.knobManager=new R.SKnobManager(this),this.midiIO=new q.SMidiIO(this),this.debugRenderer=new S.SDebugRenderer(this),this.deviceRenderer=new w.SDeviceRenderer(this),this.portRenderer=new D.SPortRenderer(this),this.knobRenderer=new m.SKnobRenderer(this),this.wireRenderer=new j.SWireRenderer(this),this.buttonRenderer=new d.SButtonRenderer(this)}return t(e,[{key:"createEntity",value:function(e){return Symbol(e+"-"+Math.random().toString(16).slice(2,6))}}]),e}();exports.ECS=E;
},{"./SAudio":"hFzp","./SButtonClicker":"pdbw","./SButtonRenderer":"qn35","./SDebugRenderer":"cNbD","./SDeviceRenderer":"sopS","./SDisplay":"Nj29","./SDragAndDrop":"jnFJ","./SKnobManager":"SdOw","./SKnobRenderer":"LnCi","./SMidiIO":"P4lI","./SMouseInput":"OXog","./SPointerGrabber":"c8pg","./SPortRenderer":"FbqG","./SPrefabs":"ILBV","./SWireManager":"TXlZ","./SWireRenderer":"Ey0W"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ECS"),r=new e.ECS;Object.assign(window,{ecs:r}),r.prefabs.createScene();
},{"./ECS":"y35b"}]},{},["QCba"], null)
//# sourceMappingURL=https://joanrieu.github.io/modular-synth-sandbox/src.22a065d5.js.map